<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversation Display</title>
    <style>
        /* Add any styling as needed */
        .speaker {
            font-weight: bold;
        }
    </style>
</head>
<body>
{{ html_output | safe }}
<button onclick="downloadCsv()">Download CSV</button>

<script>
    function downloadCsv() {
        var jsonData = {{ json_data | tojson | safe }};
        var csvContent = "data:text/csv;charset=utf-8,";
        csvContent += "speaker_id,transcription\n";
        jsonData.forEach(function (entry) {
            csvContent += `${entry.speaker_id},${entry.transcription}\n`;
        });
        var encodedUri = encodeURI(csvContent);
        var link = document.createElement('a');
        link.href = encodedUri;
        link.download = 'conversation.csv';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }
</script>


</body>
</html>
